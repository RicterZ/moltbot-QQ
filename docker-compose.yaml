version: "3.9"

services:
  nap-msg-daemon:
    build: .
    restart: unless-stopped
    environment:
      # Required
      NAPCAT_URL: ${NAPCAT_URL}
      # Optional: moltbot auth/timeout
      MOLTBOT_URL: ${MOLTBOT_URL:-ws://127.0.0.1:18789}
      MOLTBOT_TOKEN: ${MOLTBOT_TOKEN}
      MOLTBOT_PASSWORD: ${MOLTBOT_PASSWORD}
      MOLTBOT_WAIT_TIMEOUT: ${MOLTBOT_WAIT_TIMEOUT:-60}
      # Optional: restrict allowed QQ sender user_ids (space/comma separated)
      ALLOW_SENDERS: ${ALLOW_SENDERS}
    command: ["nap-msg-daemon"]
    # Uncomment to drop replies and only forward to moltbot
    # command: ["nap-msg-daemon", "--fire-and-forget"]
